## التخطيط لخوارزمية أفضل

قد تكون الخوارزمية السابقة جيدة، ويمكن تحسينها بسهولة. دعونا نرى كيف يمكن أن تبدو الخوارزمية بشكل أفضل!

عندما يكون حساس الخط فوق خط ، فإنه ينتج `1`. عندما يكون خارج الخط ، فإنه ينتج `0`.

تعمل المحركات بشكل مختلف قليلاً على الرغم من ذلك: عندما يستقبل الروبوت `1` إلى المحرك الأيمن ، فإنه يدفع المحرك إلى الأمام. عندما يستقبل `-1`، فإنه يدفع المحرك إلى الوراء.

لنلقي نظرة على خوارزمية تأخذ في الاعتبار موقع الروبوت، حالة أجهزة استشعار الخطوط والإجراءات المطلوبة من المحركات.

1. الروبوت على الخط تماما ويجب أن يقود إلى الأمام:
    
    - كلا حساسي الخط خارج الخط ويخرجان `0`
    - يجب أن يتلقى كلا المحركين `1` للقيادة للأمام

2. انحرف الروبوت إلى اليسار ويحتاج الى الإستداره إلى اليمين:
    
    - الحساس الأيمن على الخط ويخرج `1`
    - الحساس الأيسر خارج الخط ويخرج `0`
    - يجب أن يعمل المحرك الأيسر إلى الخلف وبالتالي يستلم `-1`
    - يجب أن يعمل المحرك الأيمن للأمام وبالتالي يستلم `1`

3. انحرف الروبوت إلى اليمين ويحتاج الى الإستداره إلى اليسار:
    
    - الحساس الأيمن خارج الخط ويخرج `0`
    - الحساس الأيمن على الخط ويخرج `1`
    - يجب أن يعمل المحرك الأيسر للأمام وبالتالي يستلم `1`
    - يجب أن يعمل المحرك الأيمن إلى الخلف وبالتالي يستلم `-1`

كيف يمكنك جعل هذا يحدث في الكود؟ قبل كل شيء، ستنشئ حلقة تكراريه غير منتهية لعرض قيم الحساس.

--- task ---

في ملف جديد، أضف الأسطر البرمجية التالية وقم بتشغيلها. لا تنسى ضبط أرقام الpin إذا كنت تستخدم GPIO pins مختلفة.

```python
from gpiozero import Robot, LineSensor
from time import sleep

robot = Robot(left=(7, 8), right=(9, 10)) 
left_sensor = LineSensor(17)
right_sensor= LineSensor(27)

while True:
    left_detect  = int(left_sensor.value)
    right_detect = int(right_sensor.value)
    print(left_detect, right_detect)
```

الآن حرك الروبوت ذهابا وإيابا فوق الخط لترى ما يحدث.

--- /task ---

نأمل أن ترى الناتج الثنائي من الحساسات.

![حساس-ناتج](images/sensor_output.gif)

الآن بعد أن أصبح لديك ناتج الحساس، تحتاج إلى تعديله قليلاً قبل أن ترسله إلى المحركات. وفقاً للخوارزمية المذكورة أعلاه:

- إذا كان كلا الحساسين يخرجان `0`، فيجب أن يتلقى كلا المحركين `1`
- إذا كان الحساس الأيمن يخرج `1`، فيجب أن يتلقى المحرك الأيسر `1-`
- إذا كان الحساس الأيسر يخرج `1`، فيجب أن يتلقى المحرك الأيمن `1-`

--- task ---

ضمن الحلقة التكرارية `While True` ، أنشئ متغيرين جديدين بأسماء `left_mot` و `right_mot`. يجب أن يكون لهذه المتغيرات نفس القيمة التي ترغب في أن تتلقاها المحركات. يمكنك ببساطة طباعة قيمهم داخل الحلقة التكرارية.

--- /task ---

--- hints ---
 --- hint ---

وفقًا للخوارزمية أعلاه، `if left_detect == 0 and right_detect == 0`, فماذا تريد أن تكون قيم `left_mot` و `right_mot`؟

--- /hint --- --- hint ---

هذا هو الكود للشرط الأول:

    while True:
        left_detect  = int(left_sensor.value)
        right_detect = int(right_sensor.value)
        if left_detect == 0 and right_detect == 0:
            left_mot = 1
            right_mot = 1
    

أنت بحاجة إلى عبارتين أخريتين `if` للتعامل مع الحساسات التي يتم تشغيلها بواسطة خط.

--- /hint --- --- hint ---

ها هو الكود المكتمل مع بيانات الطباعة:

```python while True: left_detect = int(left_sensor.value) right_detect = int(right_sensor.value)

    if left_detect == 0 and right_detect == 0:
        left_mot = 1
        right_mot = 1
    
    if left_detect == 0 and right_detect == 1:
        left_mot = -1
    if left_detect == 1 and right_detect == 0:
        right_mot = -1
    
    print(right_mot, left_mot)
    

```

--- /hint ------ /hints ---

--- task ---

عندما تكمل، قم بتشغيل الكود الخاص بك واختبر كيفية عمله عندما تحرك الروبوت فوق الخط.

![حساس-ناتج2](images/sensor_output2.gif)

--- /task ---